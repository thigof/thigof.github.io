import{_ as Q,a as t,l as G,S as K,s as F,b as T,v as w,Q as U,g as J,c as H,d as W,e as X,f as Y}from"./app.8697dea7.js";import{c as ee,v as x,p as te,ah as le,ai as ae,o as oe,h as se,e as ne,g as de,aj as ie,U as q,y as ue,ae as re,ak as ce,w as h,J as D,al as z,N as r,am as Ae,an as O,ao as Oe,d as V,I as me,L as y,ap as P,aq as s,ar as k,P as Z,Q as E,K as $,M as j}from"./index.2764fdaf.js";var Ce=ee({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(c,{slots:f,emit:A}){const I=de(),n=x(null);let m=0;const i=[];function v(o){const C=typeof o=="boolean"?o:c.noErrorFocus!==!0,p=++m,d=(l,a)=>{A(`validation${l===!0?"Success":"Error"}`,a)},e=l=>{const a=l.validate();return typeof a.then=="function"?a.then(u=>({valid:u,comp:l}),u=>({valid:!1,comp:l,err:u})):Promise.resolve({valid:a,comp:l})};return(c.greedy===!0?Promise.all(i.map(e)).then(l=>l.filter(a=>a.valid!==!0)):i.reduce((l,a)=>l.then(()=>e(a).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(l=>[l])).then(l=>{if(l===void 0||l.length===0)return p===m&&d(!0),!0;if(p===m){const{comp:a,err:u}=l[0];if(u!==void 0&&console.error(u),d(!1,a),C===!0){const B=l.find(({comp:M})=>typeof M.focus=="function"&&ie(M.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function R(){m++,i.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function L(o){o!==void 0&&q(o);const C=m+1;v().then(p=>{C===m&&p===!0&&(c.onSubmit!==void 0?A("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function N(o){o!==void 0&&q(o),A("reset"),ue(()=>{R(),c.autofocus===!0&&c.noResetFocus!==!0&&S()})}function S(){re(()=>{if(n.value===null)return;const o=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),C=>C.tabIndex!==-1);o!=null&&o.focus({preventScroll:!0})})}te(ce,{bindComponent(o){i.push(o)},unbindComponent(o){const C=i.indexOf(o);C!==-1&&i.splice(C,1)}});let _=!1;return le(()=>{_=!0}),ae(()=>{_===!0&&c.autofocus===!0&&S()}),oe(()=>{c.autofocus===!0&&S()}),Object.assign(I.proxy,{validate:v,resetValidation:R,submit:L,reset:N,focus:S,getValidationComponents:()=>i}),()=>se("form",{class:"q-form",ref:n,onSubmit:L,onReset:N},ne(f.default))}});const fe={class:"input-container"},ve={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:f}){const A=c,I=f,n=x({modelValue:String(A.modelValue),checked:!1}),m=i=>{A.textSelect&&i.target.select()};return h(()=>A.modelValue,i=>{n.value.checked?I("update:modelValue",n.value.modelValue):n.value.modelValue=i},{immediate:!0}),h(()=>n.value.modelValue,i=>{n.value.checked||I("update:modelValue",i)},{immediate:!0}),(i,v)=>(D(),z("div",fe,[r(Ae,{dense:"",outlined:"",modelValue:n.value.modelValue,"onUpdate:modelValue":v[0]||(v[0]=R=>n.value.modelValue=R),label:c.label1,type:c.tipo,disable:n.value.checked,onFocus:m},null,8,["modelValue","label","type","disable"]),O("i",{class:Oe(["lock",n.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:v[1]||(v[1]=R=>n.value.checked=!n.value.checked)},null,2)]))}};var g=Q(ve,[["__scopeId","data-v-3a5d1d72"]]);const Ie={class:"container q-pa-md"},be={class:"row flex items-center q-gutter-md q-mb-md"},Re={class:"column items-center"},Se={class:"column items-center"},pe={class:"row q-mt-sm q-gutter-md"},Ve={class:"row center q-mt-lg q-gutter-x-md"},Ee={__name:"IndexPage",setup(c){const f=x(null),A=x(!1),I=V(()=>t.selected.id&&t.selects.some(d=>d.id===t.selected.id)),n=()=>{T(),f.value=null},m=()=>{Y(),T(),f.value=null,F()},i=d=>{var b;A.value=!0;const e=t.selects.find(l=>l.id===d.id);if(e){f.value=e.id;const l=(b=t.values)==null?void 0:b.find(a=>a.NRPATRIMONIO1===e.NRPATRIMONIO1);l?Object.assign(t.selected_db,{id:l.id,NRPATRIMONIO1:l.NRPATRIMONIO1,DESCRICAO:l.DESCRICAO||"",LOCALIZACAO:l.LOCALIZACAO||"",ESTADO:l.DESC_ESTADO||"",OBSERVACAO:l.OBSERVACAO||"",VALOR:l.VALOR||""}):Object.assign(t.selected_db,{id:e.id,NRPATRIMONIO1:e.NRPATRIMONIO1,DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||""}),Object.assign(t.selected,{id:e.id,NRPATRIMONIO1:e.NRPATRIMONIO1,DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||"",SITUACAO:e.SITUACAO||"REGULAR"})}setTimeout(()=>{A.value=!1},50)},v=d=>{t.selects=t.selects.filter(e=>e.id!==d.id),f.value=null,F()},R=V(()=>t.selected.SITUACAO==="SEM PLACA"?"":t.selected.SITUACAO),L=V(()=>`Descri\xE7\xE3o: ${t.selected_db.DESCRICAO||""}`),N=V(()=>`Local: ${t.selected_db.LOCALIZACAO||""}`),S=V(()=>`Estado: ${t.selected_db.ESTADO||""}`),_=V(()=>`Observa\xE7\xE3o: ${t.selected_db.OBSERVACAO||""}`),o=d=>{var b;if(!d){T();return}const e=(b=t.values)==null?void 0:b.find(l=>l.NRPATRIMONIO1===String(d));e?(Object.assign(t.selected_db,{id:e.id||w(),NRPATRIMONIO1:e.NRPATRIMONIO1,DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.DESC_ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||""}),Object.assign(t.selected,{id:e.id||w(),NRPATRIMONIO1:e.NRPATRIMONIO1,DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.DESC_ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||"",SITUACAO:"REGULAR"})):(T(),t.selected.NRPATRIMONIO1=d,t.selected.SITUACAO="SEM REGISTRO")},C=G.exports.debounce(o,300),p=()=>{const d=document.getElementById("show-tables");d&&d.scrollIntoView({behavior:"smooth"})};return h(()=>t.selected.NRPATRIMONIO1,d=>{A.value||(d||T(),C(d))}),(d,e)=>{const b=me("router-link");return D(),z("div",Ie,[r(Ce,{onSubmit:P(m,["prevent"])},{default:y(()=>{var l;return[O("div",be,[O("div",Re,[e[6]||(e[6]=O("small",null,"BASE DE DADOS",-1)),r(b,{to:"/settings"},{default:y(()=>[r(U,{clickable:""},{default:y(()=>{var a,u;return[Z(k(((u=(a=s(t))==null?void 0:a.values)==null?void 0:u.length)||0)+" registros ",1)]}),_:1})]),_:1})]),O("div",Se,[e[7]||(e[7]=O("small",null,"VERIFICADOS",-1)),O("a",{href:"#show-tables",onClick:P(p,["prevent"])},[r(U,{clickable:""},{default:y(()=>{var a,u;return[Z(k(((u=(a=s(t))==null?void 0:a.selects)==null?void 0:u.length)||0)+" registros ",1)]}),_:1})])])]),r(g,{modelValue:s(t).selected.NRPATRIMONIO1,"onUpdate:modelValue":e[0]||(e[0]=a=>s(t).selected.NRPATRIMONIO1=a),label1:`NPAT: ${s(t).selected_db.NRPATRIMONIO1||""} ${R.value}`,type:"number","text-select":!0},null,8,["modelValue","label1"]),r(g,{modelValue:s(t).selected.DESCRICAO,"onUpdate:modelValue":e[1]||(e[1]=a=>s(t).selected.DESCRICAO=a),label1:L.value},null,8,["modelValue","label1"]),r(g,{modelValue:s(t).selected.LOCALIZACAO,"onUpdate:modelValue":e[2]||(e[2]=a=>s(t).selected.LOCALIZACAO=a),label1:N.value},null,8,["modelValue","label1"]),r(g,{modelValue:s(t).selected.ESTADO,"onUpdate:modelValue":e[3]||(e[3]=a=>s(t).selected.ESTADO=a),label1:S.value},null,8,["modelValue","label1"]),r(g,{modelValue:s(t).selected.OBSERVACAO,"onUpdate:modelValue":e[4]||(e[4]=a=>s(t).selected.OBSERVACAO=a),label1:_.value},null,8,["modelValue","label1"]),O("div",pe,[r(E,{color:I.value?"blue-9":"green-9",type:"submit",icon:I.value?"edit":"send",label:I.value?"Atualizar":"Adicionar"},null,8,["color","icon","label"]),s(t).selected.NRPATRIMONIO1||s(t).selected.LOCALIZACAO?(D(),$(E,{key:0,color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:n})):j("",!0)]),O("div",Ve,[r(E,{flat:"",icon:"description",label:"CSV",type:"button",onClick:e[5]||(e[5]=a=>s(J)(s(t).selects))}),r(E,{flat:"",icon:"code",label:"Relat\xF3rio",onClick:P(s(H),["prevent"])},null,8,["onClick"]),r(E,{flat:"",icon:"code",label:"Termo",type:"button",onClick:s(W)},null,8,["onClick"]),(l=s(t).selects)!=null&&l.length?(D(),$(E,{key:0,flat:"",icon:"clear",label:"Limpar",type:"button",onClick:s(X)},null,8,["onClick"])):j("",!0)])]}),_:1}),e[8]||(e[8]=O("hr",{class:"q-my-md"},null,-1)),r(K,{id:"show-tables","table-data":s(t).selects,headers:s(t).colunas,onRemove:v,onClicked:i,reverse:!0,"editing-row-id":f.value},null,8,["table-data","headers","editing-row-id"]),O("p",null,"Itens selecionados: "+k(s(t).selects.length),1)])}}};var Le=Q(Ee,[["__scopeId","data-v-2b4b0f61"]]);export{Le as default};
