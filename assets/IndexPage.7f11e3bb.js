import{_ as M,a as t,S as $,s as B,Q as w,g as j,b as G,c as z,l as J,d as h,e as K,v as H}from"./app.3939a059.js";import{c as W,v as k,p as X,ah as Y,ai as ee,o as te,h as le,e as oe,g as ae,aj as se,U as F,y as ne,ae as ie,ak as de,w as T,J as Q,al as Z,N as d,am as ce,an as u,ao as ue,d as re,I as me,L as R,ap as y,aq as o,P as E,ar as x,Q as V,O as U,as as q}from"./index.fe851cda.js";var fe=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(m,{slots:r,emit:p}){const C=ae(),a=k(null);let v=0;const c=[];function O(l){const S=typeof l=="boolean"?l:m.noErrorFocus!==!0,g=++v,D=(i,f)=>{p(`validation${i===!0?"Success":"Error"}`,f)},L=i=>{const f=i.validate();return typeof f.then=="function"?f.then(b=>({valid:b,comp:i}),b=>({valid:!1,comp:i,err:b})):Promise.resolve({valid:f,comp:i})};return(m.greedy===!0?Promise.all(c.map(L)).then(i=>i.filter(f=>f.valid!==!0)):c.reduce((i,f)=>i.then(()=>L(f).then(b=>{if(b.valid===!1)return Promise.reject(b)})),Promise.resolve()).catch(i=>[i])).then(i=>{if(i===void 0||i.length===0)return g===v&&D(!0),!0;if(g===v){const{comp:f,err:b}=i[0];if(b!==void 0&&console.error(b),D(!1,f),S===!0){const P=i.find(({comp:N})=>typeof N.focus=="function"&&se(N.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function n(){v++,c.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function e(l){l!==void 0&&F(l);const S=v+1;O().then(g=>{S===v&&g===!0&&(m.onSubmit!==void 0?p("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function A(l){l!==void 0&&F(l),p("reset"),ne(()=>{n(),m.autofocus===!0&&m.noResetFocus!==!0&&I()})}function I(){ie(()=>{if(a.value===null)return;const l=a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),S=>S.tabIndex!==-1);l!=null&&l.focus({preventScroll:!0})})}X(de,{bindComponent(l){c.push(l)},unbindComponent(l){const S=c.indexOf(l);S!==-1&&c.splice(S,1)}});let s=!1;return Y(()=>{s=!0}),ee(()=>{s===!0&&m.autofocus===!0&&I()}),te(()=>{m.autofocus===!0&&I()}),Object.assign(C.proxy,{validate:O,resetValidation:n,submit:e,reset:A,focus:I,getValidationComponents:()=>c}),()=>le("form",{class:"q-form",ref:a,onSubmit:e,onReset:A},oe(r.default))}});const ve={class:"input-container"},pe={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:r}){const p=m,C=r,a=k({modelValue:String(p.modelValue),checked:!1}),v=c=>{p.textSelect&&c.target.select()};return T(()=>p.modelValue,c=>{a.value.checked?C("update:modelValue",a.value.modelValue):a.value.modelValue=c},{immediate:!0}),T(()=>a.value.modelValue,c=>{a.value.checked||C("update:modelValue",c)},{immediate:!0}),(c,O)=>(Q(),Z("div",ve,[d(ce,{dense:"",outlined:"",modelValue:a.value.modelValue,"onUpdate:modelValue":O[0]||(O[0]=n=>a.value.modelValue=n),label:m.label1,type:m.tipo,disable:a.value.checked,onFocus:v},null,8,["modelValue","label","type","disable"]),u("i",{class:ue(["lock",a.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:O[1]||(O[1]=n=>a.value.checked=!a.value.checked)},null,2)]))}};var _=M(pe,[["__scopeId","data-v-3a5d1d72"]]);const Oe={class:"container"},be={class:"q-pa-md row flex items-center q-gutter-md"},Ae={class:"column items-center"},Se={class:"column items-center"},Ce={class:"row q-mt-sm q-gutter-md"},Ie={class:""},Ve={class:""},_e={class:"row center q-mt-lg"},ge={class:"col"},he={class:"col"},Re={class:"col"},ye={class:"col"},Ee={__name:"IndexPage",setup(m){const r=k({npat:"",search1:"",search2:"",searchSelecteds:"",searchColumn:""}),p=()=>{h(),r.value.npat=""},C=()=>{K(),r.value.npat="",h(),B()},a=n=>{const e=t.selects.find(A=>A.id===n.id);e&&(r.value.npat=e.NRPATRIMONIO1,setTimeout(()=>{t.selected.id=e.id,t.selected.NRPATRIMONIO1=e.NRPATRIMONIO1,t.selected.DESCRICAO=e.DESCRICAO||"",t.selected.LOCALIZA\u00C7\u00C3O=e.LOCALIZA\u00C7\u00C3O||"",t.selected.ESTADO=e.ESTADO||"",t.selected.OBSERVA\u00C7\u00C3O=e.OBSERVA\u00C7\u00C3O||"",t.selected.VALOR=e.VALOR||""},1e3))},v=n=>{t.selects=t.selects.filter(e=>e.id!==n.id),B()},c=re(()=>["SEM PLACA"].includes(t.selected.SITUA\u00C7\u00C3O)?"":t.selected.SITUA\u00C7\u00C3O);T(()=>r.value.npat,()=>{var n;try{h(),t.selected.NRPATRIMONIO1=r.value.npat;const e=(n=t.values)==null?void 0:n.find(A=>A.NRPATRIMONIO1===String(r.value.npat));e&&Object.assign(t.selected,{id:e.id||H(),DESCRICAO:e.DESCRICAO||"",LOCALIZA\u00C7\u00C3O:e.LOCALIZA\u00C7\u00C3O||"",ESTADO:e.DESC_ESTADO||"",OBSERVA\u00C7\u00C3O:e.OBSERVA\u00C7\u00C3O||"",VALOR:e.VALOR||""}),r.value.npat?e?t.selected.SITUA\u00C7\u00C3O="REGULAR":t.selected.SITUA\u00C7\u00C3O="SEM REGISTRO":t.selected.SITUA\u00C7\u00C3O="SEM PLACA"}catch(e){console.log("npat: ",e),h()}},{immediate:!0});const O=()=>{const n=document.getElementById("show-tables");n&&n.scrollIntoView({behavior:"smooth"})};try{r.value.npat=null}catch(n){console.log("Erro ao carregar dados localStorage: ",n)}return(n,e)=>{const A=me("router-link");return Q(),Z("div",Oe,[d(fe,{onSubmit:y(C,["prevent"])},{default:R(()=>{var I;return[u("div",be,[u("div",Ae,[e[6]||(e[6]=u("small",{style:{position:"absolute",top:"15px"}},"BASE DE DADOS",-1)),d(A,{to:"/settings"},{default:R(()=>[d(w,null,{default:R(()=>{var s,l;return[E(x(((l=(s=o(t))==null?void 0:s.values)==null?void 0:l.length)||0)+" registros ",1)]}),_:1})]),_:1})]),u("div",Se,[e[7]||(e[7]=u("small",{style:{position:"absolute",top:"15px"}},"VERIFICADOS",-1)),u("a",{href:"#show-tables",onClick:y(O,["prevent"])},[d(w,null,{default:R(()=>{var s,l;return[E(x((l=(s=o(t))==null?void 0:s.selects)==null?void 0:l.length)+" registros ",1)]}),_:1})])])]),d(_,{tipo:"number",textSelect:!0,modelValue:r.value.npat,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.npat=s),label1:"NPAT "+c.value},null,8,["modelValue","label1"]),d(_,{modelValue:o(t).selected.DESCRICAO,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).selected.DESCRICAO=s),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),d(_,{modelValue:o(t).selected.LOCALIZA\u00C7\u00C3O,"onUpdate:modelValue":e[2]||(e[2]=s=>o(t).selected.LOCALIZA\u00C7\u00C3O=s),label1:"Local"},null,8,["modelValue"]),d(_,{modelValue:o(t).selected.ESTADO,"onUpdate:modelValue":e[3]||(e[3]=s=>o(t).selected.ESTADO=s),label1:"Estado"},null,8,["modelValue"]),d(_,{modelValue:o(t).selected.OBSERVA\u00C7\u00C3O,"onUpdate:modelValue":e[4]||(e[4]=s=>o(t).selected.OBSERVA\u00C7\u00C3O=s),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),u("div",Ce,[u("div",Ie,[d(V,{color:"green-9",type:"button",icon:"send",label:"Adicionar",onClick:C})]),u("div",Ve,[U(d(V,{color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:p},null,512),[[q,o(t).selected.NRPATRIMONIO1||o(t).selected.LOCALIZA\u00C7\u00C3O]])])]),u("div",_e,[u("div",ge,[d(V,{flat:"",class:"col-2 col-sm-6",icon:"description",label:"CSV",type:"button",onClick:e[5]||(e[5]=s=>o(j)(o(t).selects))})]),u("div",he,[d(V,{flat:"",class:"col-2 col-sm-2",icon:"code",label:"Relat\xF3rio",onClick:y(o(G),["prevent"])},null,8,["onClick"])]),u("div",Re,[d(V,{flat:"",class:"col-3 col-sm-4",icon:"code",label:"Termo",type:"button",onClick:o(z)},null,8,["onClick"])]),U(u("div",ye,[d(V,{flat:"",class:"col-3 col-sm-4",icon:"clear",label:"Limpar",type:"button",onClick:o(J)},null,8,["onClick"])],512),[[q,(I=o(t).selects)==null?void 0:I.length]])])]}),_:1}),d($,{id:"show-tables",tableData:o(t).selects,headers:o(t).colunas,onRemove:v,onClicked:a,reverse:!0},null,8,["tableData","headers"]),E(" Itens selecionados: "+x(o(t).selects.length),1)])}}};var De=M(Ee,[["__scopeId","data-v-0d3fbef1"]]);export{De as default};
