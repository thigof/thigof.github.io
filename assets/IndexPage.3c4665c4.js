import{_ as M,a as t,S as $,s as w,Q as B,g as j,b as G,c as z,l as J,d as h,e as K,v as H}from"./app.7ba3f05b.js";import{c as W,v as k,p as X,ah as Y,ai as ee,o as te,h as le,e as ae,g as oe,aj as se,U as F,y as ne,ae as de,ak as ce,w as T,J as Q,al as Z,N as c,am as ie,an as f,ao as ue,d as re,I as me,L as R,ap as y,aq as a,P as E,ar as x,as as fe,Q as I,O as U,at as q}from"./index.76b95afe.js";var ve=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:u,emit:p}){const C=oe(),o=k(null);let v=0;const i=[];function O(l){const S=typeof l=="boolean"?l:r.noErrorFocus!==!0,g=++v,L=(d,m)=>{p(`validation${d===!0?"Success":"Error"}`,m)},D=d=>{const m=d.validate();return typeof m.then=="function"?m.then(b=>({valid:b,comp:d}),b=>({valid:!1,comp:d,err:b})):Promise.resolve({valid:m,comp:d})};return(r.greedy===!0?Promise.all(i.map(D)).then(d=>d.filter(m=>m.valid!==!0)):i.reduce((d,m)=>d.then(()=>D(m).then(b=>{if(b.valid===!1)return Promise.reject(b)})),Promise.resolve()).catch(d=>[d])).then(d=>{if(d===void 0||d.length===0)return g===v&&L(!0),!0;if(g===v){const{comp:m,err:b}=d[0];if(b!==void 0&&console.error(b),L(!1,m),S===!0){const P=d.find(({comp:N})=>typeof N.focus=="function"&&se(N.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function n(){v++,i.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function e(l){l!==void 0&&F(l);const S=v+1;O().then(g=>{S===v&&g===!0&&(r.onSubmit!==void 0?p("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function A(l){l!==void 0&&F(l),p("reset"),ne(()=>{n(),r.autofocus===!0&&r.noResetFocus!==!0&&V()})}function V(){de(()=>{if(o.value===null)return;const l=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),S=>S.tabIndex!==-1);l!=null&&l.focus({preventScroll:!0})})}X(ce,{bindComponent(l){i.push(l)},unbindComponent(l){const S=i.indexOf(l);S!==-1&&i.splice(S,1)}});let s=!1;return Y(()=>{s=!0}),ee(()=>{s===!0&&r.autofocus===!0&&V()}),te(()=>{r.autofocus===!0&&V()}),Object.assign(C.proxy,{validate:O,resetValidation:n,submit:e,reset:A,focus:V,getValidationComponents:()=>i}),()=>le("form",{class:"q-form",ref:o,onSubmit:e,onReset:A},ae(u.default))}});const pe={class:"input-container"},Oe={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:u}){const p=r,C=u,o=k({modelValue:String(p.modelValue),checked:!1}),v=i=>{p.textSelect&&i.target.select()};return T(()=>p.modelValue,i=>{o.value.checked?C("update:modelValue",o.value.modelValue):o.value.modelValue=i},{immediate:!0}),T(()=>o.value.modelValue,i=>{o.value.checked||C("update:modelValue",i)},{immediate:!0}),(i,O)=>(Q(),Z("div",pe,[c(ie,{dense:"",outlined:"",modelValue:o.value.modelValue,"onUpdate:modelValue":O[0]||(O[0]=n=>o.value.modelValue=n),label:r.label1,type:r.tipo,disable:o.value.checked,onFocus:v},null,8,["modelValue","label","type","disable"]),f("i",{class:ue(["lock",o.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:O[1]||(O[1]=n=>o.value.checked=!o.value.checked)},null,2)]))}};var _=M(Oe,[["__scopeId","data-v-3a5d1d72"]]);const be={class:"q-pa-md row items-start q-gutter-md"},Ae={class:"row q-mt-sm q-gutter-md"},Se={class:""},Ce={class:""},Ve={class:"row center q-mt-lg"},Ie={class:"col"},_e={class:"col"},ge={class:"col"},he={class:"col"},Re={__name:"IndexPage",setup(r){const u=k({npat:"",search1:"",search2:"",searchSelecteds:"",searchColumn:""}),p=()=>{h(),u.value.npat=""},C=()=>{K(),u.value.npat="",h(),w()},o=n=>{const e=t.selects.find(A=>A.id===n.id);e&&(u.value.npat=e.NRPATRIMONIO1,setTimeout(()=>{t.selected.id=e.id,t.selected.NRPATRIMONIO1=e.NRPATRIMONIO1,t.selected.DESCRICAO=e.DESCRICAO||"",t.selected.LOCALIZA\u00C7\u00C3O=e.LOCALIZA\u00C7\u00C3O||"",t.selected.ESTADO=e.ESTADO||"",t.selected.OBSERVA\u00C7\u00C3O=e.OBSERVA\u00C7\u00C3O||"",t.selected.VALOR=e.VALOR||""},1e3))},v=n=>{t.selects=t.selects.filter(e=>e.id!==n.id),w()},i=re(()=>["SEM PLACA"].includes(t.selected.SITUA\u00C7\u00C3O)?"":t.selected.SITUA\u00C7\u00C3O);T(()=>u.value.npat,()=>{var n;try{h(),t.selected.NRPATRIMONIO1=u.value.npat;const e=(n=t.values)==null?void 0:n.find(A=>A.NRPATRIMONIO1===String(u.value.npat));e&&Object.assign(t.selected,{id:e.id||H(),DESCRICAO:e.DESCRICAO||"",LOCALIZA\u00C7\u00C3O:e.LOCALIZA\u00C7\u00C3O||"",ESTADO:e.DESC_ESTADO||"",OBSERVA\u00C7\u00C3O:e.OBSERVA\u00C7\u00C3O||"",VALOR:e.VALOR||""}),u.value.npat?e?t.selected.SITUA\u00C7\u00C3O="REGULAR":t.selected.SITUA\u00C7\u00C3O="SEM REGISTRO":t.selected.SITUA\u00C7\u00C3O="SEM PLACA"}catch(e){console.log("npat: ",e),h()}},{immediate:!0});const O=()=>{const n=document.getElementById("show-tables");n&&n.scrollIntoView({behavior:"smooth"})};try{u.value.npat=null}catch(n){console.log("Erro ao carregar dados localStorage: ",n)}return(n,e)=>{const A=me("router-link");return Q(),Z(fe,null,[c(ve,{onSubmit:y(C,["prevent"])},{default:R(()=>{var V;return[f("div",be,[c(A,{to:"/settings"},{default:R(()=>[c(B,null,{default:R(()=>{var s,l;return[E(x(((l=(s=a(t))==null?void 0:s.values)==null?void 0:l.length)||0)+" registros ",1)]}),_:1})]),_:1}),f("a",{href:"#show-tables",onClick:y(O,["prevent"])},[c(B,null,{default:R(()=>{var s,l;return[E(x((l=(s=a(t))==null?void 0:s.selects)==null?void 0:l.length)+" verificados ",1)]}),_:1})])]),c(_,{tipo:"number",textSelect:!0,modelValue:u.value.npat,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value.npat=s),label1:"NPAT "+i.value},null,8,["modelValue","label1"]),c(_,{modelValue:a(t).selected.DESCRICAO,"onUpdate:modelValue":e[1]||(e[1]=s=>a(t).selected.DESCRICAO=s),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),c(_,{modelValue:a(t).selected.LOCALIZA\u00C7\u00C3O,"onUpdate:modelValue":e[2]||(e[2]=s=>a(t).selected.LOCALIZA\u00C7\u00C3O=s),label1:"Local"},null,8,["modelValue"]),c(_,{modelValue:a(t).selected.ESTADO,"onUpdate:modelValue":e[3]||(e[3]=s=>a(t).selected.ESTADO=s),label1:"Estado"},null,8,["modelValue"]),c(_,{modelValue:a(t).selected.OBSERVA\u00C7\u00C3O,"onUpdate:modelValue":e[4]||(e[4]=s=>a(t).selected.OBSERVA\u00C7\u00C3O=s),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),f("div",Ae,[f("div",Se,[c(I,{color:"green-9",type:"button",icon:"send",label:"Adicionar",onClick:C})]),f("div",Ce,[U(c(I,{color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:p},null,512),[[q,a(t).selected.NRPATRIMONIO1||a(t).selected.LOCALIZA\u00C7\u00C3O]])])]),f("div",Ve,[f("div",Ie,[c(I,{flat:"",class:"col-2 col-sm-6",icon:"description",label:"CSV",type:"button",onClick:e[5]||(e[5]=s=>a(j)(a(t).selects))})]),f("div",_e,[c(I,{flat:"",class:"col-2 col-sm-2",icon:"code",label:"Relat\xF3rio",onClick:y(a(G),["prevent"])},null,8,["onClick"])]),f("div",ge,[c(I,{flat:"",class:"col-3 col-sm-4",icon:"code",label:"Termo",type:"button",onClick:a(z)},null,8,["onClick"])]),U(f("div",he,[c(I,{flat:"",class:"col-3 col-sm-4",icon:"clear",label:"Limpar",type:"button",onClick:a(J)},null,8,["onClick"])],512),[[q,(V=a(t).selects)==null?void 0:V.length]])])]}),_:1}),c($,{id:"show-tables",tableData:a(t).selects,headers:a(t).colunas,onRemove:v,onClicked:o,reverse:!0},null,8,["tableData","headers"]),E(" Itens selecionados: "+x(a(t).selects.length),1)],64)}}};var Te=M(Re,[["__scopeId","data-v-481c6180"]]);export{Te as default};
