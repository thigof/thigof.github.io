import{_ as M,a as t,l as $,s as y,S as j,Q as w,g as G,b as z,c as J,d as K,e as h,f as H,v as W}from"./app.14d0163b.js";import{c as X,v as L,p as Y,ah as ee,ai as te,o as le,h as oe,e as ae,g as se,aj as ne,U as B,y as ie,ae as de,ak as ce,w as k,J as Q,al as Z,N as d,am as ue,an as m,ao as re,d as me,I as ve,L as R,ap as x,aq as a,P as E,ar as T,as as fe,Q as I,O as U,at as q}from"./index.00a01d5d.js";var pe=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:u,emit:O}){const C=se(),s=L(null);let f=0;const c=[];function b(l){const o=typeof l=="boolean"?l:r.noErrorFocus!==!0,p=++f,D=(i,v)=>{O(`validation${i===!0?"Success":"Error"}`,v)},P=i=>{const v=i.validate();return typeof v.then=="function"?v.then(A=>({valid:A,comp:i}),A=>({valid:!1,comp:i,err:A})):Promise.resolve({valid:v,comp:i})};return(r.greedy===!0?Promise.all(c.map(P)).then(i=>i.filter(v=>v.valid!==!0)):c.reduce((i,v)=>i.then(()=>P(v).then(A=>{if(A.valid===!1)return Promise.reject(A)})),Promise.resolve()).catch(i=>[i])).then(i=>{if(i===void 0||i.length===0)return p===f&&D(!0),!0;if(p===f){const{comp:v,err:A}=i[0];if(A!==void 0&&console.error(A),D(!1,v),o===!0){const N=i.find(({comp:F})=>typeof F.focus=="function"&&ne(F.$)===!1);N!==void 0&&N.comp.focus()}}return!1})}function S(){f++,c.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function _(l){l!==void 0&&B(l);const o=f+1;b().then(p=>{o===f&&p===!0&&(r.onSubmit!==void 0?O("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function n(l){l!==void 0&&B(l),O("reset"),ie(()=>{S(),r.autofocus===!0&&r.noResetFocus!==!0&&e()})}function e(){de(()=>{if(s.value===null)return;const l=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),o=>o.tabIndex!==-1);l!=null&&l.focus({preventScroll:!0})})}Y(ce,{bindComponent(l){c.push(l)},unbindComponent(l){const o=c.indexOf(l);o!==-1&&c.splice(o,1)}});let g=!1;return ee(()=>{g=!0}),te(()=>{g===!0&&r.autofocus===!0&&e()}),le(()=>{r.autofocus===!0&&e()}),Object.assign(C.proxy,{validate:b,resetValidation:S,submit:_,reset:n,focus:e,getValidationComponents:()=>c}),()=>oe("form",{class:"q-form",ref:s,onSubmit:_,onReset:n},ae(u.default))}});const Oe={class:"input-container"},be={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:u}){const O=r,C=u,s=L({modelValue:String(O.modelValue),checked:!1}),f=c=>{O.textSelect&&c.target.select()};return k(()=>O.modelValue,c=>{s.value.checked?C("update:modelValue",s.value.modelValue):s.value.modelValue=c},{immediate:!0}),k(()=>s.value.modelValue,c=>{s.value.checked||C("update:modelValue",c)},{immediate:!0}),(c,b)=>(Q(),Z("div",Oe,[d(ue,{dense:"",outlined:"",modelValue:s.value.modelValue,"onUpdate:modelValue":b[0]||(b[0]=S=>s.value.modelValue=S),label:r.label1,type:r.tipo,disable:s.value.checked,onFocus:f},null,8,["modelValue","label","type","disable"]),m("i",{class:re(["lock",s.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:b[1]||(b[1]=S=>s.value.checked=!s.value.checked)},null,2)]))}};var V=M(be,[["__scopeId","data-v-3a5d1d72"]]);const Ae={class:"q-pa-md row items-start q-gutter-md"},Se=["value"],ge={class:"row q-mt-sm q-gutter-md"},Ce={class:""},Ie={class:""},Ve={class:"row center q-mt-lg"},_e={class:"col"},he={class:"col"},Re={class:"col"},ye={class:"col"},xe={__name:"IndexPage",setup(r){const u=L({npat:"",search1:"",search2:"",searchSelecteds:"",searchColumn:""}),O=()=>{h(),u.value.npat=""},C=()=>{H(),u.value.npat="",h(),y()},s=n=>{const e=t.selects.find(g=>g.id===n.id);e&&(u.value.npat=e.NRPATRIMONIO1,setTimeout(()=>{t.selected.id=e.id,t.selected.NRPATRIMONIO1=e.NRPATRIMONIO1,t.selected.DESCRICAO=e.DESCRICAO||"",t.selected.LOCALIZA\u00C7\u00C3O=e.LOCALIZA\u00C7\u00C3O||"",t.selected.ESTADO=e.ESTADO||"",t.selected.OBSERVA\u00C7\u00C3O=e.OBSERVA\u00C7\u00C3O||"",t.selected.VALOR=e.VALOR||""},1e3))},f=n=>{t.selects=t.selects.filter(e=>e.id!==n.id),y()},c=me(()=>["SEM PLACA"].includes(t.selected.SITUA\u00C7\u00C3O)?"":t.selected.SITUA\u00C7\u00C3O);k(()=>u.value.npat,()=>{var n;try{h(),t.selected.NRPATRIMONIO1=u.value.npat;const e=(n=t.values)==null?void 0:n.find(g=>g.NRPATRIMONIO1===String(u.value.npat));e&&Object.assign(t.selected,{id:e.id||W(),DESCRICAO:e.DESCRICAO||"",LOCALIZA\u00C7\u00C3O:e.LOCALIZA\u00C7\u00C3O||"",ESTADO:e.DESC_ESTADO||"",OBSERVA\u00C7\u00C3O:e.OBSERVA\u00C7\u00C3O||"",VALOR:e.VALOR||""}),u.value.npat?e?t.selected.SITUA\u00C7\u00C3O="REGULAR":t.selected.SITUA\u00C7\u00C3O="SEM REGISTRO":t.selected.SITUA\u00C7\u00C3O="SEM PLACA"}catch(e){console.log("npat: ",e),h()}},{immediate:!0});const b=()=>{const n=document.getElementById("show-tables");n&&n.scrollIntoView({behavior:"smooth"})},S=$.exports.debounce(n=>{t.session=n.target.value,y(),console.log("session: ",t.session)},300),_=n=>{n.target.select()};try{u.value.npat=null}catch(n){console.log("Erro ao carregar dados localStorage: ",n)}return(n,e)=>{const g=ve("router-link");return Q(),Z(fe,null,[d(pe,{onSubmit:x(C,["prevent"])},{default:R(()=>{var l;return[m("div",Ae,[d(g,{to:"/settings"},{default:R(()=>[d(w,null,{default:R(()=>{var o,p;return[E(T(((p=(o=a(t))==null?void 0:o.values)==null?void 0:p.length)||0)+" registros ",1)]}),_:1})]),_:1}),m("a",{href:"#show-tables",onClick:x(b,["prevent"])},[d(w,null,{default:R(()=>{var o,p;return[E(T((p=(o=a(t))==null?void 0:o.selects)==null?void 0:p.length)+" verificados ",1)]}),_:1})])]),m("input",{type:"text",onInput:e[0]||(e[0]=(...o)=>a(S)&&a(S)(...o)),onFocus:_,class:"editable",value:a(t).session},null,40,Se),d(V,{tipo:"number",textSelect:!0,modelValue:u.value.npat,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.npat=o),label1:"NPAT "+c.value},null,8,["modelValue","label1"]),d(V,{modelValue:a(t).selected.DESCRICAO,"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).selected.DESCRICAO=o),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),d(V,{modelValue:a(t).selected.LOCALIZA\u00C7\u00C3O,"onUpdate:modelValue":e[3]||(e[3]=o=>a(t).selected.LOCALIZA\u00C7\u00C3O=o),label1:"Local"},null,8,["modelValue"]),d(V,{modelValue:a(t).selected.ESTADO,"onUpdate:modelValue":e[4]||(e[4]=o=>a(t).selected.ESTADO=o),label1:"Estado"},null,8,["modelValue"]),d(V,{modelValue:a(t).selected.OBSERVA\u00C7\u00C3O,"onUpdate:modelValue":e[5]||(e[5]=o=>a(t).selected.OBSERVA\u00C7\u00C3O=o),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),m("div",ge,[m("div",Ce,[d(I,{color:"green-9",type:"button",icon:"send",label:"Adicionar",onClick:C})]),m("div",Ie,[U(d(I,{color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:O},null,512),[[q,a(t).selected.NRPATRIMONIO1||a(t).selected.LOCALIZA\u00C7\u00C3O]])])]),m("div",Ve,[m("div",_e,[d(I,{flat:"",class:"col-2 col-sm-6",icon:"description",label:"CSV",type:"button",onClick:e[6]||(e[6]=o=>a(G)(a(t).selects))})]),m("div",he,[d(I,{flat:"",class:"col-2 col-sm-2",icon:"code",label:"Relat\xF3rio",onClick:x(a(z),["prevent"])},null,8,["onClick"])]),m("div",Re,[d(I,{flat:"",class:"col-3 col-sm-4",icon:"code",label:"Termo",type:"button",onClick:a(J)},null,8,["onClick"])]),U(m("div",ye,[d(I,{flat:"",class:"col-3 col-sm-4",icon:"clear",label:"Limpar",type:"button",onClick:a(K)},null,8,["onClick"])],512),[[q,(l=a(t).selects)==null?void 0:l.length]])])]}),_:1}),d(j,{id:"show-tables",tableData:a(t).selects,headers:a(t).colunas,onRemove:f,onClicked:s,reverse:!0},null,8,["tableData","headers"]),E(" Itens selecionados: "+T(a(t).selects.length),1)],64)}}};var Le=M(xe,[["__scopeId","data-v-5d7bac66"]]);export{Le as default};
