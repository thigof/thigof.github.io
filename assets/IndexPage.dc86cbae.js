import{_ as Z,a as l,S as j,s as B,Q as w,g as z,b as G,c as K,l as J,d as k,e as H,v as W}from"./app.acf420b2.js";import{c as X,v as _,p as Y,ah as ee,ai as te,o as le,h as oe,e as ae,g as se,aj as ne,U as F,y as ie,ae as ue,ak as de,w as L,J as x,al as $,N as d,am as re,an as v,ao as ce,d as q,I as me,L as E,ap as T,aq as a,ar as h,P as U,Q as V,K as M,M as Q}from"./index.f572c265.js";var fe=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(m,{slots:A,emit:r}){const O=se(),s=_(null);let p=0;const u=[];function b(t){const c=typeof t=="boolean"?t:m.noErrorFocus!==!0,o=++p,S=(i,f)=>{r(`validation${i===!0?"Success":"Error"}`,f)},D=i=>{const f=i.validate();return typeof f.then=="function"?f.then(C=>({valid:C,comp:i}),C=>({valid:!1,comp:i,err:C})):Promise.resolve({valid:f,comp:i})};return(m.greedy===!0?Promise.all(u.map(D)).then(i=>i.filter(f=>f.valid!==!0)):u.reduce((i,f)=>i.then(()=>D(f).then(C=>{if(C.valid===!1)return Promise.reject(C)})),Promise.resolve()).catch(i=>[i])).then(i=>{if(i===void 0||i.length===0)return o===p&&S(!0),!0;if(o===p){const{comp:f,err:C}=i[0];if(C!==void 0&&console.error(C),S(!1,f),c===!0){const P=i.find(({comp:N})=>typeof N.focus=="function"&&ne(N.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function I(){p++,u.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function R(t){t!==void 0&&F(t);const c=p+1;b().then(o=>{c===p&&o===!0&&(m.onSubmit!==void 0?r("submit",t):t!==void 0&&t.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function y(t){t!==void 0&&F(t),r("reset"),ie(()=>{I(),m.autofocus===!0&&m.noResetFocus!==!0&&n()})}function n(){ue(()=>{if(s.value===null)return;const t=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),c=>c.tabIndex!==-1);t!=null&&t.focus({preventScroll:!0})})}Y(de,{bindComponent(t){u.push(t)},unbindComponent(t){const c=u.indexOf(t);c!==-1&&u.splice(c,1)}});let e=!1;return ee(()=>{e=!0}),te(()=>{e===!0&&m.autofocus===!0&&n()}),le(()=>{m.autofocus===!0&&n()}),Object.assign(O.proxy,{validate:b,resetValidation:I,submit:R,reset:y,focus:n,getValidationComponents:()=>u}),()=>oe("form",{class:"q-form",ref:s,onSubmit:R,onReset:y},ae(A.default))}});const ve={class:"input-container"},Ae={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(m,{emit:A}){const r=m,O=A,s=_({modelValue:String(r.modelValue),checked:!1}),p=u=>{r.textSelect&&u.target.select()};return L(()=>r.modelValue,u=>{s.value.checked?O("update:modelValue",s.value.modelValue):s.value.modelValue=u},{immediate:!0}),L(()=>s.value.modelValue,u=>{s.value.checked||O("update:modelValue",u)},{immediate:!0}),(u,b)=>(x(),$("div",ve,[d(re,{dense:"",outlined:"",modelValue:s.value.modelValue,"onUpdate:modelValue":b[0]||(b[0]=I=>s.value.modelValue=I),label:m.label1,type:m.tipo,disable:s.value.checked,onFocus:p},null,8,["modelValue","label","type","disable"]),v("i",{class:ce(["lock",s.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:b[1]||(b[1]=I=>s.value.checked=!s.value.checked)},null,2)]))}};var g=Z(Ae,[["__scopeId","data-v-3a5d1d72"]]);const pe={class:"container q-pa-md"},be={class:"row flex items-center q-gutter-md q-mb-md"},Ce={class:"column items-center"},Oe={class:"column items-center"},Se={class:"row q-mt-sm q-gutter-md"},Ie={class:"row center q-mt-lg q-gutter-x-md"},Ve={__name:"IndexPage",setup(m){const A=_(""),r=_(null),O=q(()=>l.selected.id&&l.selects.some(n=>n.id===l.selected.id)),s=()=>{k(),A.value="",r.value=null},p=()=>{H(),A.value="",k(),r.value=null,B()},u=n=>{const e=l.selects.find(t=>t.id===n.id);e&&(r.value=e.id,A.value=e.NRPATRIMONIO1,setTimeout(()=>{Object.assign(l.selected,{id:e.id,NRPATRIMONIO1:e.NRPATRIMONIO1,DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||""})},100))},b=n=>{l.selects=l.selects.filter(e=>e.id!==n.id),r.value=null,B()},I=q(()=>l.selected.SITUACAO==="SEM PLACA"?"":l.selected.SITUACAO),R=n=>{var t;k(),l.selected.NRPATRIMONIO1=n;const e=(t=l.values)==null?void 0:t.find(c=>c.NRPATRIMONIO1===String(n));e?Object.assign(l.selected,{id:e.id||W(),DESCRICAO:e.DESCRICAO||"",LOCALIZACAO:e.LOCALIZACAO||"",ESTADO:e.DESC_ESTADO||"",OBSERVACAO:e.OBSERVACAO||"",VALOR:e.VALOR||"",SITUACAO:"REGULAR"}):l.selected.SITUACAO=n?"SEM REGISTRO":"SEM PLACA"},y=()=>{const n=document.getElementById("show-tables");n&&n.scrollIntoView({behavior:"smooth"})};return L(A,n=>{R(n)}),(n,e)=>{const t=me("router-link");return x(),$("div",pe,[d(fe,{onSubmit:T(p,["prevent"])},{default:E(()=>{var c;return[v("div",be,[v("div",Ce,[e[6]||(e[6]=v("small",null,"BASE DE DADOS",-1)),d(t,{to:"/settings"},{default:E(()=>[d(w,{clickable:""},{default:E(()=>{var o,S;return[U(h(((S=(o=a(l))==null?void 0:o.values)==null?void 0:S.length)||0)+" registros ",1)]}),_:1})]),_:1})]),v("div",Oe,[e[7]||(e[7]=v("small",null,"VERIFICADOS",-1)),v("a",{href:"#show-tables",onClick:T(y,["prevent"])},[d(w,{clickable:""},{default:E(()=>{var o,S;return[U(h(((S=(o=a(l))==null?void 0:o.selects)==null?void 0:S.length)||0)+" registros ",1)]}),_:1})])])]),d(g,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=o=>A.value=o),label1:"NPAT "+I.value,type:"number","text-select":!0},null,8,["modelValue","label1"]),d(g,{modelValue:a(l).selected.DESCRICAO,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).selected.DESCRICAO=o),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),d(g,{modelValue:a(l).selected.LOCALIZACAO,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).selected.LOCALIZACAO=o),label1:"Local"},null,8,["modelValue"]),d(g,{modelValue:a(l).selected.ESTADO,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).selected.ESTADO=o),label1:"Estado"},null,8,["modelValue"]),d(g,{modelValue:a(l).selected.OBSERVACAO,"onUpdate:modelValue":e[4]||(e[4]=o=>a(l).selected.OBSERVACAO=o),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),v("div",Se,[d(V,{color:O.value?"blue-9":"green-9",type:"submit",icon:O.value?"edit":"send",label:O.value?"Atualizar":"Adicionar"},null,8,["color","icon","label"]),a(l).selected.NRPATRIMONIO1||a(l).selected.LOCALIZACAO?(x(),M(V,{key:0,color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:s})):Q("",!0)]),v("div",Ie,[d(V,{flat:"",icon:"description",label:"CSV",type:"button",onClick:e[5]||(e[5]=o=>a(z)(a(l).selects))}),d(V,{flat:"",icon:"code",label:"Relat\xF3rio",onClick:T(a(G),["prevent"])},null,8,["onClick"]),d(V,{flat:"",icon:"code",label:"Termo",type:"button",onClick:a(K)},null,8,["onClick"]),(c=a(l).selects)!=null&&c.length?(x(),M(V,{key:0,flat:"",icon:"clear",label:"Limpar",type:"button",onClick:a(J)},null,8,["onClick"])):Q("",!0)])]}),_:1}),e[8]||(e[8]=v("hr",{class:"q-my-md"},null,-1)),d(j,{id:"show-tables","table-data":a(l).selects,headers:a(l).colunas,onRemove:b,onClicked:u,reverse:!0,"editing-row-id":r.value},null,8,["table-data","headers","editing-row-id"]),v("p",null,"Itens selecionados: "+h(a(l).selects.length),1)])}}};var Ee=Z(Ve,[["__scopeId","data-v-5040580c"]]);export{Ee as default};
