import{_ as w,a as t,S as $,s as N,Q as F,g as j,b as G,c as K,l as z,d as h,e as H,v as J}from"./app.b4ff84c9.js";import{c as W,v as T,p as X,af as Y,ag as ee,o as te,h as le,e as ae,g as oe,ah as se,S as B,y as ne,ac as de,ai as ce,w as x,I as Q,aj as Z,L as n,ak as ie,al as v,am as ue,d as re,H as me,K as g,an as M,ao as o,N as y,ap as E,aq as fe,Q as V,M as U,ar as q}from"./index.bc2b7050.js";var ve=W({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:u,emit:p}){const C=oe(),s=T(null);let f=0;const i=[];function d(l){const b=typeof l=="boolean"?l:r.noErrorFocus!==!0,R=++f,k=(c,m)=>{p(`validation${c===!0?"Success":"Error"}`,m)},L=c=>{const m=c.validate();return typeof m.then=="function"?m.then(A=>({valid:A,comp:c}),A=>({valid:!1,comp:c,err:A})):Promise.resolve({valid:m,comp:c})};return(r.greedy===!0?Promise.all(i.map(L)).then(c=>c.filter(m=>m.valid!==!0)):i.reduce((c,m)=>c.then(()=>L(m).then(A=>{if(A.valid===!1)return Promise.reject(A)})),Promise.resolve()).catch(c=>[c])).then(c=>{if(c===void 0||c.length===0)return R===f&&k(!0),!0;if(R===f){const{comp:m,err:A}=c[0];if(A!==void 0&&console.error(A),k(!1,m),b===!0){const D=c.find(({comp:P})=>typeof P.focus=="function"&&se(P.$)===!1);D!==void 0&&D.comp.focus()}}return!1})}function e(){f++,i.forEach(l=>{typeof l.resetValidation=="function"&&l.resetValidation()})}function O(l){l!==void 0&&B(l);const b=f+1;d().then(R=>{b===f&&R===!0&&(r.onSubmit!==void 0?p("submit",l):l!==void 0&&l.target!==void 0&&typeof l.target.submit=="function"&&l.target.submit())})}function _(l){l!==void 0&&B(l),p("reset"),ne(()=>{e(),r.autofocus===!0&&r.noResetFocus!==!0&&a()})}function a(){de(()=>{if(s.value===null)return;const l=s.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||s.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),b=>b.tabIndex!==-1);l!=null&&l.focus({preventScroll:!0})})}X(ce,{bindComponent(l){i.push(l)},unbindComponent(l){const b=i.indexOf(l);b!==-1&&i.splice(b,1)}});let S=!1;return Y(()=>{S=!0}),ee(()=>{S===!0&&r.autofocus===!0&&a()}),te(()=>{r.autofocus===!0&&a()}),Object.assign(C.proxy,{validate:d,resetValidation:e,submit:O,reset:_,focus:a,getValidationComponents:()=>i}),()=>le("form",{class:"q-form",ref:s,onSubmit:O,onReset:_},ae(u.default))}});const pe={class:"input-container"},Oe={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:u}){const p=r,C=u,s=T({modelValue:String(p.modelValue),checked:!1}),f=i=>{p.textSelect&&i.target.select()};return x(()=>p.modelValue,i=>{s.value.checked?C("update:modelValue",s.value.modelValue):s.value.modelValue=i},{immediate:!0}),x(()=>s.value.modelValue,i=>{s.value.checked||C("update:modelValue",i)},{immediate:!0}),(i,d)=>(Q(),Z("div",pe,[n(ie,{dense:"",outlined:"",modelValue:s.value.modelValue,"onUpdate:modelValue":d[0]||(d[0]=e=>s.value.modelValue=e),label:r.label1,type:r.tipo,disable:s.value.checked,onFocus:f},null,8,["modelValue","label","type","disable"]),v("i",{class:ue(["lock",s.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:d[1]||(d[1]=e=>s.value.checked=!s.value.checked)},null,2)]))}};var I=w(Oe,[["__scopeId","data-v-3a5d1d72"]]);const Ae={class:"q-pa-md row items-start q-gutter-md"},Se={class:"row q-mt-sm q-gutter-md"},be={class:""},Ce={class:""},Ve={class:"row center q-mt-lg"},_e={class:"col"},ge={class:"col"},Ie={class:"col"},Re={class:"col"},he={__name:"IndexPage",setup(r){const u=T({npat:"",search1:"",search2:"",searchSelecteds:"",searchColumn:""}),p=()=>{h(),u.value.npat=""},C=()=>{H(),u.value.npat="",h(),N()},s=d=>{const e=t.selects.find(O=>O.id===d.id);e&&(u.value.npat=e.NRPATRIMONIO1,setTimeout(()=>{t.selected.id=e.id,t.selected.NRPATRIMONIO1=e.NRPATRIMONIO1,t.selected.DESCRICAO=e.DESCRICAO||"",t.selected.LOCALIZA\u00C7\u00C3O=e.LOCALIZA\u00C7\u00C3O||"",t.selected.ESTADO=e.ESTADO||"",t.selected.OBSERVA\u00C7\u00C3O=e.OBSERVA\u00C7\u00C3O||"",t.selected.VALOR=e.VALOR||""},1e3))},f=d=>{t.selects=t.selects.filter(e=>e.id!==d.id),N()},i=re(()=>["SEM PLACA"].includes(t.selected.SITUA\u00C7\u00C3O)?"":t.selected.SITUA\u00C7\u00C3O);x(()=>u.value.npat,()=>{var d;try{h(),t.selected.NRPATRIMONIO1=u.value.npat;const e=(d=t.values)==null?void 0:d.find(O=>O.NRPATRIMONIO1===String(u.value.npat));e&&Object.assign(t.selected,{id:e.id||J(),DESCRICAO:e.DESCRICAO||"",LOCALIZA\u00C7\u00C3O:e.LOCALIZA\u00C7\u00C3O||"",ESTADO:e.DESC_ESTADO||"",OBSERVA\u00C7\u00C3O:e.OBSERVA\u00C7\u00C3O||"",VALOR:e.VALOR||""}),u.value.npat?e?t.selected.SITUA\u00C7\u00C3O="REGULAR":t.selected.SITUA\u00C7\u00C3O="SEM REGISTRO":t.selected.SITUA\u00C7\u00C3O="SEM PLACA"}catch(e){console.log("npat: ",e),h()}},{immediate:!0});try{u.value.npat=null}catch(d){console.log("Erro ao carregar dados localStorage: ",d)}return(d,e)=>{const O=me("router-link");return Q(),Z(fe,null,[n(ve,{onSubmit:M(C,["prevent"])},{default:g(()=>{var _;return[v("div",Ae,[n(O,{to:"/settings"},{default:g(()=>[n(F,null,{default:g(()=>{var a,S;return[y(E(((S=(a=o(t))==null?void 0:a.values)==null?void 0:S.length)||0)+" registros ",1)]}),_:1})]),_:1}),n(O,{to:"/"},{default:g(()=>[n(F,null,{default:g(()=>{var a,S;return[y(E((S=(a=o(t))==null?void 0:a.selects)==null?void 0:S.length)+" verificados ",1)]}),_:1})]),_:1})]),n(I,{tipo:"number",textSelect:!0,modelValue:u.value.npat,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value.npat=a),label1:"NPAT "+i.value},null,8,["modelValue","label1"]),n(I,{modelValue:o(t).selected.DESCRICAO,"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).selected.DESCRICAO=a),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),n(I,{modelValue:o(t).selected.LOCALIZA\u00C7\u00C3O,"onUpdate:modelValue":e[2]||(e[2]=a=>o(t).selected.LOCALIZA\u00C7\u00C3O=a),label1:"Local"},null,8,["modelValue"]),n(I,{modelValue:o(t).selected.ESTADO,"onUpdate:modelValue":e[3]||(e[3]=a=>o(t).selected.ESTADO=a),label1:"Estado"},null,8,["modelValue"]),n(I,{modelValue:o(t).selected.OBSERVA\u00C7\u00C3O,"onUpdate:modelValue":e[4]||(e[4]=a=>o(t).selected.OBSERVA\u00C7\u00C3O=a),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),v("div",Se,[v("div",be,[n(V,{color:"green-9",type:"button",icon:"send",label:"Adicionar",onClick:C})]),v("div",Ce,[U(n(V,{color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:p},null,512),[[q,o(t).selected.NRPATRIMONIO1||o(t).selected.LOCALIZA\u00C7\u00C3O]])])]),v("div",Ve,[v("div",_e,[n(V,{flat:"",class:"col-2 col-sm-6",icon:"description",label:"CSV",type:"button",onClick:e[5]||(e[5]=a=>o(j)(o(t).selects))})]),v("div",ge,[n(V,{flat:"",class:"col-2 col-sm-2",icon:"code",label:"Relat\xF3rio",onClick:M(o(G),["prevent"])},null,8,["onClick"])]),v("div",Ie,[n(V,{flat:"",class:"col-3 col-sm-4",icon:"code",label:"Termo",type:"button",onClick:o(K)},null,8,["onClick"])]),U(v("div",Re,[n(V,{flat:"",class:"col-3 col-sm-4",icon:"clear",label:"Limpar",type:"button",onClick:o(z)},null,8,["onClick"])],512),[[q,(_=o(t).selects)==null?void 0:_.length]])])]}),_:1}),n($,{tableData:o(t).selects,headers:o(t).colunas,onRemove:f,onClicked:s,reverse:!0},null,8,["tableData","headers"]),y(" Itens selecionados: "+E(o(t).selects.length),1)],64)}}};var Te=w(he,[["__scopeId","data-v-35a85ec8"]]);export{Te as default};
