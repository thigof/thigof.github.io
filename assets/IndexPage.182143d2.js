import{_ as M,a as l,l as $,s as y,S as j,Q as B,g as G,b as z,c as J,d as K,e as h,f as H,v as W}from"./app.4ec8d167.js";import{c as X,v as L,p as Y,ah as ee,ai as te,o as le,h as oe,e as ae,g as se,aj as ne,U as F,y as ie,ae as de,ak as ce,w as k,J as Q,al as Z,N as i,am as ue,an as m,ao as re,d as me,I as ve,L as R,ap as x,aq as o,P as E,ar as T,as as fe,Q as I,O as U,at as q}from"./index.4463370a.js";var pe=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:c,emit:O}){const C=se(),a=L(null);let f=0;const d=[];function b(e){const u=typeof e=="boolean"?e:r.noErrorFocus!==!0,_=++f,D=(n,v)=>{O(`validation${n===!0?"Success":"Error"}`,v)},P=n=>{const v=n.validate();return typeof v.then=="function"?v.then(S=>({valid:S,comp:n}),S=>({valid:!1,comp:n,err:S})):Promise.resolve({valid:v,comp:n})};return(r.greedy===!0?Promise.all(d.map(P)).then(n=>n.filter(v=>v.valid!==!0)):d.reduce((n,v)=>n.then(()=>P(v).then(S=>{if(S.valid===!1)return Promise.reject(S)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return _===f&&D(!0),!0;if(_===f){const{comp:v,err:S}=n[0];if(S!==void 0&&console.error(S),D(!1,v),u===!0){const N=n.find(({comp:w})=>typeof w.focus=="function"&&ne(w.$)===!1);N!==void 0&&N.comp.focus()}}return!1})}function A(){f++,d.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function s(e){e!==void 0&&F(e);const u=f+1;b().then(_=>{u===f&&_===!0&&(r.onSubmit!==void 0?O("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function t(e){e!==void 0&&F(e),O("reset"),ie(()=>{A(),r.autofocus===!0&&r.noResetFocus!==!0&&p()})}function p(){de(()=>{if(a.value===null)return;const e=a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}Y(ce,{bindComponent(e){d.push(e)},unbindComponent(e){const u=d.indexOf(e);u!==-1&&d.splice(u,1)}});let V=!1;return ee(()=>{V=!0}),te(()=>{V===!0&&r.autofocus===!0&&p()}),le(()=>{r.autofocus===!0&&p()}),Object.assign(C.proxy,{validate:b,resetValidation:A,submit:s,reset:t,focus:p,getValidationComponents:()=>d}),()=>oe("form",{class:"q-form",ref:a,onSubmit:s,onReset:t},ae(c.default))}});const Oe={class:"input-container"},be={__name:"InputFixed",props:{modelValue:{type:String,default:""},tipo:{type:String,default:"text"},label1:{type:String,default:""},label2:{type:String,default:"Fixar"},textSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:c}){const O=r,C=c,a=L({modelValue:String(O.modelValue),checked:!1}),f=d=>{O.textSelect&&d.target.select()};return k(()=>O.modelValue,d=>{a.value.checked?C("update:modelValue",a.value.modelValue):a.value.modelValue=d},{immediate:!0}),k(()=>a.value.modelValue,d=>{a.value.checked||C("update:modelValue",d)},{immediate:!0}),(d,b)=>(Q(),Z("div",Oe,[i(ue,{dense:"",outlined:"",modelValue:a.value.modelValue,"onUpdate:modelValue":b[0]||(b[0]=A=>a.value.modelValue=A),label:r.label1,type:r.tipo,disable:a.value.checked,onFocus:f},null,8,["modelValue","label","type","disable"]),m("i",{class:re(["lock",a.value.checked?"mdi mdi-lock":"mdi mdi-lock-open-outline"]),onClick:b[1]||(b[1]=A=>a.value.checked=!a.value.checked)},null,2)]))}};var g=M(be,[["__scopeId","data-v-3a5d1d72"]]);const Se={class:"q-pa-md row items-start q-gutter-md"},Ae=["value"],Ce={class:"row q-mt-sm q-gutter-md"},Ie={class:""},Ve={class:""},ge={class:"row center q-mt-lg"},_e={class:"col"},he={class:"col"},Re={class:"col"},ye={class:"col"},xe={__name:"IndexPage",setup(r){const c=L({npat:"",search1:"",search2:"",searchSelecteds:"",searchColumn:""}),O=()=>{h(),c.value.npat=""},C=()=>{H(),c.value.npat="",h(),y()},a=s=>{const t=l.selects.find(p=>p.id===s.id);t&&(c.value.npat=t.NRPATRIMONIO1,setTimeout(()=>{l.selected.id=t.id,l.selected.NRPATRIMONIO1=t.NRPATRIMONIO1,l.selected.DESCRICAO=t.DESCRICAO||"",l.selected.LOCALIZA\u00C7\u00C3O=t.LOCALIZA\u00C7\u00C3O||"",l.selected.ESTADO=t.ESTADO||"",l.selected.OBSERVA\u00C7\u00C3O=t.OBSERVA\u00C7\u00C3O||"",l.selected.VALOR=t.VALOR||""},1e3))},f=s=>{l.selects=l.selects.filter(t=>t.id!==s.id),y()},d=me(()=>["SEM PLACA"].includes(l.selected.SITUA\u00C7\u00C3O)?"":l.selected.SITUA\u00C7\u00C3O);k(()=>c.value.npat,()=>{var s;try{h(),l.selected.NRPATRIMONIO1=c.value.npat;const t=(s=l.values)==null?void 0:s.find(p=>p.NRPATRIMONIO1===String(c.value.npat));t&&Object.assign(l.selected,{id:t.id||W(),DESCRICAO:t.DESCRICAO||"",LOCALIZA\u00C7\u00C3O:t.LOCALIZA\u00C7\u00C3O||"",ESTADO:t.DESC_ESTADO||"",OBSERVA\u00C7\u00C3O:t.OBSERVA\u00C7\u00C3O||"",VALOR:t.VALOR||""}),c.value.npat?t?l.selected.SITUA\u00C7\u00C3O="REGULAR":l.selected.SITUA\u00C7\u00C3O="SEM REGISTRO":l.selected.SITUA\u00C7\u00C3O="SEM PLACA"}catch(t){console.log("npat: ",t),h()}},{immediate:!0});const b=()=>{const s=document.getElementById("show-tables");s&&s.scrollIntoView({behavior:"smooth"})},A=$.exports.debounce(s=>{l.session=s.target.value,y(),console.log("session: ",l.session)},300);try{c.value.npat=null}catch(s){console.log("Erro ao carregar dados localStorage: ",s)}return(s,t)=>{const p=ve("router-link");return Q(),Z(fe,null,[i(pe,{onSubmit:x(C,["prevent"])},{default:R(()=>{var V;return[m("div",Se,[i(p,{to:"/settings"},{default:R(()=>[i(B,null,{default:R(()=>{var e,u;return[E(T(((u=(e=o(l))==null?void 0:e.values)==null?void 0:u.length)||0)+" registros ",1)]}),_:1})]),_:1}),m("a",{href:"#show-tables",onClick:x(b,["prevent"])},[i(B,null,{default:R(()=>{var e,u;return[E(T((u=(e=o(l))==null?void 0:e.selects)==null?void 0:u.length)+" verificados ",1)]}),_:1})])]),m("input",{type:"text",onInput:t[0]||(t[0]=(...e)=>o(A)&&o(A)(...e)),class:"editable",value:o(l).session},null,40,Ae),i(g,{tipo:"number",textSelect:!0,modelValue:c.value.npat,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value.npat=e),label1:"NPAT "+d.value},null,8,["modelValue","label1"]),i(g,{modelValue:o(l).selected.DESCRICAO,"onUpdate:modelValue":t[2]||(t[2]=e=>o(l).selected.DESCRICAO=e),label1:"Descri\xE7\xE3o"},null,8,["modelValue"]),i(g,{modelValue:o(l).selected.LOCALIZA\u00C7\u00C3O,"onUpdate:modelValue":t[3]||(t[3]=e=>o(l).selected.LOCALIZA\u00C7\u00C3O=e),label1:"Local"},null,8,["modelValue"]),i(g,{modelValue:o(l).selected.ESTADO,"onUpdate:modelValue":t[4]||(t[4]=e=>o(l).selected.ESTADO=e),label1:"Estado"},null,8,["modelValue"]),i(g,{modelValue:o(l).selected.OBSERVA\u00C7\u00C3O,"onUpdate:modelValue":t[5]||(t[5]=e=>o(l).selected.OBSERVA\u00C7\u00C3O=e),label1:"Observa\xE7\xE3o"},null,8,["modelValue"]),m("div",Ce,[m("div",Ie,[i(I,{color:"green-9",type:"button",icon:"send",label:"Adicionar",onClick:C})]),m("div",Ve,[U(i(I,{color:"yellow-9",type:"button",icon:"close",label:"Cancelar",onClick:O},null,512),[[q,o(l).selected.NRPATRIMONIO1||o(l).selected.LOCALIZA\u00C7\u00C3O]])])]),m("div",ge,[m("div",_e,[i(I,{flat:"",class:"col-2 col-sm-6",icon:"description",label:"CSV",type:"button",onClick:t[6]||(t[6]=e=>o(G)(o(l).selects))})]),m("div",he,[i(I,{flat:"",class:"col-2 col-sm-2",icon:"code",label:"Relat\xF3rio",onClick:x(o(z),["prevent"])},null,8,["onClick"])]),m("div",Re,[i(I,{flat:"",class:"col-3 col-sm-4",icon:"code",label:"Termo",type:"button",onClick:o(J)},null,8,["onClick"])]),U(m("div",ye,[i(I,{flat:"",class:"col-3 col-sm-4",icon:"clear",label:"Limpar",type:"button",onClick:o(K)},null,8,["onClick"])],512),[[q,(V=o(l).selects)==null?void 0:V.length]])])]}),_:1}),i(j,{id:"show-tables",tableData:o(l).selects,headers:o(l).colunas,onRemove:f,onClicked:a,reverse:!0},null,8,["tableData","headers"]),E(" Itens selecionados: "+T(o(l).selects.length),1)],64)}}};var Le=M(xe,[["__scopeId","data-v-576cd850"]]);export{Le as default};
